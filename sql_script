CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

CREATE TYPE public.status_enum AS ENUM
    ('OPEN', 'ORDERED');

CREATE TABLE public.carts (
	id uuid NOT NULL DEFAULT uuid_generate_v4() PRIMARY key,
	user_id uuid NOT NULL DEFAULT uuid_generate_v4(),
	created_at date NOT NULL,
	updated_at date NOT NULL,
	status status_enum NOT NULL
);

CREATE TABLE public.cart_items (
	cart_id uuid NULL,
	product_id uuid NULL,
	count integer NOT NULL,
	FOREIGN KEY (cart_id) REFERENCES public.carts(id)
);

CREATE TABLE public.products (
	id uuid not null DEFAULT uuid_generate_v4() primary key,
	title text not null,
	description text default 'description',
	price integer NOT null
);

insert into public.products (title, description, price) values (
'T-shirt 1',
'clothes',
55);

insert into public.products (title, description, price) values (
'T-shirt 1',
'clothes',
55);

insert into public.products (title, description, price) values (
'T-shirt 2',
'clothes',
40);

insert into public.products (title, description, price) values (
'T-shirt 3',
'clothes',
35);

insert into public.products (title, description, price) values (
'T-shirt 4',
'clothes',
52);
